"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[1860],{9868:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>l,default:()=>u,frontMatter:()=>t,metadata:()=>d,toc:()=>a});var r=n(7624),i=n(2172);const t={sidebar_position:2},l="02 - Mini-processeur",d={id:"tp/02",title:"02 - Mini-processeur",description:"Simuler l\u2019ex\xe9cution d\u2019un jeu d\u2019instructions",source:"@site/docs/tp/02.md",sourceDirName:"tp",slug:"/tp/02",permalink:"/docs/tp/02",draft:!1,unlisted:!1,editUrl:"https://github.com/UPB-FILS-alf/upb-fils-alf.github.io/edit/main/docs/tp/02.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"01 - Introduction en Kotlin",permalink:"/docs/tp01"},next:{title:"03 - Automates Finis",permalink:"/docs/tp03"}},c={},a=[{value:"Simuler l\u2019ex\xe9cution d\u2019un jeu d\u2019instructions",id:"simuler-lex\xe9cution-dun-jeu-dinstructions",level:4},{value:"Objectifs du TP",id:"objectifs-du-tp",level:2},{value:"Th\xe9orie n\xe9cessaire",id:"th\xe9orie-n\xe9cessaire",level:2},{value:"Instructions du processeur",id:"instructions-du-processeur",level:3},{value:"Registres",id:"registres",level:3},{value:"Syntaxe de base",id:"syntaxe-de-base",level:3},{value:"Exercice",id:"exercice",level:2},{value:"Examples",id:"examples",level:3},{value:"Conseils avant de commencer",id:"conseils-avant-de-commencer",level:3},{value:"Sources",id:"sources",level:2}];function o(e){const s={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.M)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.h1,{id:"02---mini-processeur",children:"02 - Mini-processeur"}),"\n",(0,r.jsx)(s.h4,{id:"simuler-lex\xe9cution-dun-jeu-dinstructions",children:"Simuler l\u2019ex\xe9cution d\u2019un jeu d\u2019instructions"}),"\n",(0,r.jsx)(s.h2,{id:"objectifs-du-tp",children:"Objectifs du TP"}),"\n",(0,r.jsx)(s.p,{children:"Dans ce TP, vous allez simuler le fonctionnement d'un processeur avec trois registres et un nombre r\xe9duit d\u2019instructions, qui parcourt des fichiers .asm. Vous allez travailler et vous habituer avec les cha\xeenes de caract\xe8res en Kotlin."}),"\n",(0,r.jsx)(s.h2,{id:"th\xe9orie-n\xe9cessaire",children:"Th\xe9orie n\xe9cessaire"}),"\n",(0,r.jsx)(s.h3,{id:"instructions-du-processeur",children:"Instructions du processeur"}),"\n",(0,r.jsxs)(s.p,{children:["Comme vous avez appris au cours, les processeurs ne travaillent pas avec les langages de haut niveau. En r\xe9alit\xe9, ils ont un ",(0,r.jsx)(s.strong,{children:"ensemble d\u2019instructions simples"}),",  sp\xe9cifiques \xe0 chaque architecture, qu\u2019ils peuvent executer (et c\u2019est le but du compilateur de transformer le code haut-niveau dans des tels instructions)."]}),"\n",(0,r.jsx)(s.h3,{id:"registres",children:"Registres"}),"\n",(0,r.jsx)(s.p,{children:"Les registres sont des composantes du processeur dans lequels on peut stocker des donn\xe9es. Pensez au registres comme des unit\xe9s tr\xe8s petites de memoire (en fonction de processeur, on peut avoir des registres sur 8, 16, 32 ou m\xeame 64 bits). L\u2019acc\xe8s au registres est tr\xe8s vite, donc dans un programme usuel on peut les utiliser pour des valeurs qu\u2019on utilise fr\xe9quemment.\nDans un programme d\u2019assemblage, on utilise les registres directement, en \xe9crivant leurs noms, comme les variables dans les langages de haut-niveau."}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-nasm",children:"    ; Exemple de code dans langage d'assemblage\n    ; ax, bx et cx sont des registres\n    mov ax, bx   \n    add bx, cx\n    div cx\n"})}),"\n",(0,r.jsx)(s.h3,{id:"syntaxe-de-base",children:"Syntaxe de base"}),"\n",(0,r.jsxs)(s.p,{children:["La syntaxe pour une instruction en langage d\u2019assemblage est: ",(0,r.jsx)(s.code,{children:"instruction [op\xe9rande 1, op\xe9rande 2, ..]"}),".\nLe nombre d'op\xe9randes d\xe9pend de l\u2019instruction. Chaque ligne contient une seule instruction et ses op\xe9randes."]}),"\n",(0,r.jsx)(s.admonition,{type:"tip",children:(0,r.jsx)(s.p,{children:"Pour plusieurs informations sur le langage d\u2019assemblage, consultez les liens dans la s\xe9ction \u201cSources\u201d!"})}),"\n",(0,r.jsx)(s.h2,{id:"exercice",children:"Exercice"}),"\n",(0,r.jsx)(s.p,{children:"Pour le TP d\u2019aujourd\u2019hui, vous allez recevoir des fichiers .asm contenant des instructions de processeur que vous devez executer. C\u2019est \xe0 vous de parcourir les fichiers, aussi que d\u2019\xe9crire l\u2019implantation pour chaque instruction n\xe9cessaire."}),"\n",(0,r.jsxs)(s.p,{children:["Le processeur a trois registres, ",(0,r.jsx)(s.code,{children:"A"}),",  ",(0,r.jsx)(s.code,{children:"B"})," et ",(0,r.jsx)(s.code,{children:"C"})," dans lesquels on peut garder que des valeurs enti\xe8res (",(0,r.jsx)(s.code,{children:"Int"}),"). Au debut du chaque programme, les registres ont la valeur 0. Les instructions demand\xe9es sont:"]}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{style:{textAlign:"center"},children:"Instruction"}),(0,r.jsx)(s.th,{children:"Op\xe9randes"}),(0,r.jsx)(s.th,{children:"Description"}),(0,r.jsx)(s.th,{children:"Exemple"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{style:{textAlign:"center"},children:(0,r.jsx)(s.code,{children:"mov"})}),(0,r.jsx)(s.td,{children:"reg1, reg2/val"}),(0,r.jsxs)(s.td,{children:["Copie ",(0,r.jsx)(s.code,{children:"val"})," ou la valeur situ\xe9e en ",(0,r.jsx)(s.code,{children:"reg2"})," dans ",(0,r.jsx)(s.code,{children:"reg1"}),".  ",(0,r.jsx)("br",{})," Equivalent en programmation ",(0,r.jsx)(s.code,{children:"reg1 = reg2"})," ou ",(0,r.jsx)(s.code,{children:"reg1 = val"})]}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"mov A, 2"})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{style:{textAlign:"center"},children:(0,r.jsx)(s.code,{children:"add"})}),(0,r.jsx)(s.td,{children:"reg1/val1, reg2/val2"}),(0,r.jsxs)(s.td,{children:["Fait la somme entre la valeur situ\xe9e en ",(0,r.jsx)(s.code,{children:"reg1"})," ou ",(0,r.jsx)(s.code,{children:"val1"})," et la valeur situ\xe9e en ",(0,r.jsx)(s.code,{children:"reg2"})," ou ",(0,r.jsx)(s.code,{children:"val2"})," et met le r\xe9sultat dans le registre C. ",(0,r.jsx)("br",{})," Equivalent en programmation ",(0,r.jsx)(s.code,{children:"C = reg1 + reg2"})]}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"add A, B"})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{style:{textAlign:"center"},children:(0,r.jsx)(s.code,{children:"sub"})}),(0,r.jsx)(s.td,{children:"reg1/val1, reg2/val2"}),(0,r.jsxs)(s.td,{children:["Fait la diff\xe9rence entre la valeur situ\xe9e en ",(0,r.jsx)(s.code,{children:"reg1"})," ou ",(0,r.jsx)(s.code,{children:"val1"})," et la valeur situ\xe9e en ",(0,r.jsx)(s.code,{children:"reg2"})," ou ",(0,r.jsx)(s.code,{children:"val2"})," et met le r\xe9sultat dans le registre C. ",(0,r.jsx)("br",{})," Equivalent en programmation ",(0,r.jsx)(s.code,{children:"C = reg1 - reg2"})]}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"sub A, B"})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{style:{textAlign:"center"},children:(0,r.jsx)(s.code,{children:"mul"})}),(0,r.jsx)(s.td,{children:"reg1/val1, reg2/val2"}),(0,r.jsxs)(s.td,{children:["Fait le produit entre la valeur situ\xe9e en ",(0,r.jsx)(s.code,{children:"reg1"})," ou ",(0,r.jsx)(s.code,{children:"val1"})," et la valeur situ\xe9e en ",(0,r.jsx)(s.code,{children:"reg2"})," ou ",(0,r.jsx)(s.code,{children:"val2"})," et met le r\xe9sultat dans le registre C. ",(0,r.jsx)("br",{})," Equivalent en programmation ",(0,r.jsx)(s.code,{children:"C = reg1 * val2"})]}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"mul A, B"})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{style:{textAlign:"center"},children:(0,r.jsx)(s.code,{children:"div"})}),(0,r.jsx)(s.td,{children:"reg1/val1, reg2/val2"}),(0,r.jsxs)(s.td,{children:["Fait la division entre la valeur situ\xe9e en ",(0,r.jsx)(s.code,{children:"reg1"})," ou ",(0,r.jsx)(s.code,{children:"val1"})," et la valeur situ\xe9e en ",(0,r.jsx)(s.code,{children:"reg2"})," ou ",(0,r.jsx)(s.code,{children:"val2"})," et met le quotient dans le registre C. ",(0,r.jsx)("br",{})," Equivalent en programmation ",(0,r.jsx)(s.code,{children:"C = reg1 / val2"})]}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"div A, B"})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{style:{textAlign:"center"},children:(0,r.jsx)(s.code,{children:"cmp"})}),(0,r.jsx)(s.td,{children:"reg/val"}),(0,r.jsxs)(s.td,{children:["Compare la valeur situ\xe9e en A avec ",(0,r.jsx)(s.code,{children:"val"})," ou la valeur situ\xe9e en ",(0,r.jsx)(s.code,{children:"reg"})," et met le r\xe9sultat dans le registre C. ",(0,r.jsx)("b",{}),"  Le r\xe9sultat de la comparaison est -1 si la valeur de ",(0,r.jsx)(s.code,{children:"A"})," est plus petite que ",(0,r.jsx)(s.code,{children:"val"})," ou que celle du ",(0,r.jsx)(s.code,{children:"reg"}),", 1 si elle est plus grande, ou 0 si les deux sont \xe9gales. ",(0,r.jsx)("br",{})," Equivalent en programmation ",(0,r.jsx)(s.code,{children:"C = reg1.compareTo(reg2)"})]}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"cmp 7"})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{style:{textAlign:"center"},children:(0,r.jsx)(s.code,{children:"print"})}),(0,r.jsx)(s.td,{children:"reg/val"}),(0,r.jsxs)(s.td,{children:["Affiche sur une ligne de la sortie standard la valeur situ\xe9e en ",(0,r.jsx)(s.code,{children:"reg"})," ou ",(0,r.jsx)(s.code,{children:"val"}),". ",(0,r.jsx)("br",{})," Equivalent en programmation ",(0,r.jsx)(s.code,{children:"print(reg)"})]}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"print A"})})]})]})]}),"\n",(0,r.jsx)(s.h3,{id:"examples",children:"Examples"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-nasm",children:"    ; 1. Calculer et afficher la somme et la diff\xe9rence entre deux nombres (dans notre cas, 47 et 38)\n    mov A, 47    ; on met le premier nombre dans le registre A\n    mov B, 38    ; on met le deuxi\xe8me nombre dans le registre B\n    add A, B     ; on fait la somme entre les deux nombres (sachant que le r\xe9sultat se trouve maintenant dans le registre C)   \n    print C      ; on affiche la somme\n    sub A, B     ; on fait la diff\xe9rence entre les deux nombres (toujours sachant que le r\xe9sultat se trouve maintenant dans le registre C)   \n    print C      ; affiche la diff\xe9rence\n"})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-nasm",children:"    ; 2. Calculer le reste de la division entre deux nombres (dans notre cas, 41 et 6)\n    mov B, 41    ; on met le premier nombre dans le registre B\n    mov A, 6     ; on met le deuxi\xe8me nombre dans le registre A\n    div B, A     ; on fait la divison (sachant que le r\xe9sultat se trouve maintenant dans le registre C) \n\n    ; Pour calculer le reste, on multiplie le diviseur avec le quotient et on soustrait le r\xe9sultat du dividende.\n\n    mul C, A     ; le produit entre le diviseur et le quotient\n    sub B, C     ; on fait la diff\xe9rence entre le dividende initial et le produit calcul\xe9 par nous\n    print C      ; on affiche le reste de la division (qui se trouve dans le registre C)\n"})}),"\n",(0,r.jsx)(s.h3,{id:"conseils-avant-de-commencer",children:"Conseils avant de commencer"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Dans les fichiers du TP, regardez les contenus d\u2019un fichier .asm. Observez la syntaxe d\u2019un programme entier."}),"\n",(0,r.jsxs)(s.li,{children:["Commencez par parcourir un fichier et afficher ses lignes individuellement (partagez les lignes en utilisant la fonction ",(0,r.jsx)(s.code,{children:"split()"}),")."]}),"\n",(0,r.jsx)(s.li,{children:"Ensuite, pour chaque ligne, s\xe9parez l\u2019instruction et ses op\xe9randes."}),"\n",(0,r.jsx)(s.li,{children:"Implantez les instructions"}),"\n",(0,r.jsx)(s.li,{children:"Enfin, executez le programme."}),"\n"]}),"\n",(0,r.jsx)(s.admonition,{type:"warning",children:(0,r.jsxs)(s.p,{children:["Pendant ce TP, vous ne pouvez pas utiliser des expressions r\xe9guli\xe8res que pour la fonction ",(0,r.jsx)(s.code,{children:"split()"}),". On va travailler avec les expression r\xe9guli\xe8res dans un TP prochain."]})}),"\n",(0,r.jsx)(s.h2,{id:"sources",children:"Sources"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Un simulateur d'un processeur avec des addresses sur 8 bits : ",(0,r.jsx)(s.a,{href:"https://schweigi.github.io/assembler-simulator/index.html",children:"8 bit processor"})]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.a,{href:"https://www.ic.unicamp.br/~pannain/mc404/aulas/pdfs/Art%20Of%20Intel%20x86%20Assembly.pdf",children:(0,r.jsx)(s.em,{children:"The Art of Intel x86 Assembly"})})," - Chapitre 6: The 80x86 Instruction Set"]}),"\n"]})]})}function u(e={}){const{wrapper:s}={...(0,i.M)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},2172:(e,s,n)=>{n.d(s,{I:()=>d,M:()=>l});var r=n(1504);const i={},t=r.createContext(i);function l(e){const s=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),r.createElement(t.Provider,{value:s},e.children)}}}]);